(function(f){var d=function(a,b){return null===a||void 0===a||0===a.length||b&&""===f.trim(a)},g=function(a,b){a.removeClass(b).addClass(b)},k=function(a,b,c){return(a=d(a.data(b))?a.attr(b):a.data(b))?a:c[b]},h=function(a,b){this.$element=f(a);this.init(b)};h.prototype={constructor:h,_parseAttr:function(a,b){var c=this.$element;if("range"===c.attr("type")||"number"===c.attr("type")){var c=k(c,a,b),e;switch(a){case"min":e=0;break;case"max":e=5;break;default:e=.5}c=d(c)?e:c;return parseFloat(c)}return parseFloat(b[a])},listenClick:function(a,b){a.on("click touchstart",function(a){a.stopPropagation();a.preventDefault();if(!0!==a.handled)b(a),a.handled=!0;else return!1})},setDefault:function(a,b){d(this[a])&&(this[a]=b)},getPosition:function(a){return(a.pageX||a.originalEvent.touches[0].pageX)-this.$rating.offset().left},listen:function(){var a=this,b,c;a.initTouch();a.listenClick(a.$rating,function(c){if(a.inactive)return!1;b=a.getPosition(c);a.setStars(b);a.$element.trigger("change").trigger("rating.change",[a.$element.val(),a.$caption.html()]);a.starClicked=!0});a.$rating.on("mousemove",function(e){a.hoverEnabled&&!a.inactive&&(a.starClicked=!1,b=a.getPosition(e),c=a.calculate(b),a.toggleHover(c),a.$element.trigger("rating.hover",[c.val,c.caption,"stars"]))});a.$rating.on("mouseleave",function(){!a.hoverEnabled||a.inactive||a.starClicked||(c=a.cache,a.toggleHover(c),a.$element.trigger("rating.hoverleave",["stars"]))});a.$clear.on("mousemove",function(){if(a.hoverEnabled&&!a.inactive&&a.hoverOnClear){a.clearClicked=!1;var b='<span class="'+a.clearCaptionClass+'">'+a.clearCaption+"</span>",d=a.clearValue,f=a.getWidthFromValue(d);c={caption:b,width:f,val:d};a.toggleHover(c);a.$element.trigger("rating.hover",[d,b,"clear"])}});a.$clear.on("mouseleave",function(){a.hoverEnabled&&!a.inactive&&!a.clearClicked&&a.hoverOnClear&&(c=a.cache,a.toggleHover(c),a.$element.trigger("rating.hoverleave",["clear"]))});a.listenClick(a.$clear,function(){a.inactive||(a.clear(),a.clearClicked=!0)});f(a.$element[0].form).on("reset",function(){a.inactive||a.reset()})},destroy:function(){var a=this.$element;d(this.$container)||this.$container.before(a).remove();f.removeData(a.get(0));a.off("rating").removeClass("hide")},create:function(a){var b=this.$element;a=a||this.options||{};this.destroy();b.rating(a)},setTouch:function(a,b){if(("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)&&!this.inactive){var c=a.originalEvent,c=this.getPosition((c.touches||c.changedTouches)[0]);if(b)this.setStars(c),this.$element.trigger("change").trigger("rating.change",[this.$element.val(),this.$caption.html()]),this.starClicked=!0;else{var e=this.calculate(c),c=e.val<=this.clearValue?this.fetchCaption(this.clearValue):e.caption,d=this.getWidthFromValue(this.clearValue),e=e.val<=this.clearValue?this.rtl?100-d+"%":d+"%":e.width;this.$caption.html(c);this.$stars.css("width",e)}}},initTouch:function(){var a=this;a.$rating.on("touchstart touchmove touchend",function(b){a.setTouch(b,"touchend"===b.type)})},initSlider:function(a){d(this.$element.val())&&this.$element.val(0);this.initialValue=this.$element.val();this.setDefault("min",this._parseAttr("min",a));this.setDefault("max",this._parseAttr("max",a));this.setDefault("step",this._parseAttr("step",a));if(isNaN(this.min)||d(this.min))this.min=0;if(isNaN(this.max)||d(this.max))this.max=5;if(isNaN(this.step)||d(this.step)||0===this.step)this.step=.5;this.diff=this.max-this.min},init:function(a){var b=this,c=b.$element,e;b.options=a;f.each(a,function(a,c){b[a]=c});b.starClicked=!1;b.clearClicked=!1;b.initSlider(a);b.checkDisabled();b.setDefault("rtl",c.attr("dir"));b.rtl&&c.attr("dir","rtl");b.setDefault("symbol",b.glyphicon?"\ue006":"\u2605");b.setDefault("clearButtonBaseClass","clear-rating");b.setDefault("clearButtonActiveClass","clear-rating-active");b.setDefault("clearValue",b.min);g(c,"form-control hide");b.$clearElement=d(a.clearElement)?null:f(a.clearElement);b.$captionElement=d(a.captionElement)?null:f(a.captionElement);void 0===b.$rating&&void 0===b.$container&&(b.$rating=f(document.createElement("div")).html('<div class="rating-stars"></div>'),b.$container=f(document.createElement("div")),b.$container.before(b.$rating).append(b.$rating),c.before(b.$container).appendTo(b.$rating));b.$stars=b.$rating.find(".rating-stars");b.generateRating();b.$clear=d(b.$clearElement)?b.$container.find("."+b.clearButtonBaseClass):b.$clearElement;b.$caption=d(b.$captionElement)?b.$container.find(".caption"):b.$captionElement;b.setStars();b.listen();b.showClear&&b.$clear.attr({"class":b.getClearClass()});a=c.val();e=b.getWidthFromValue(a);b.cache={caption:b.$caption.html(),width:(b.rtl?100-e:e)+"%",val:a};c.removeClass("rating-loading")},checkDisabled:function(){this.disabled=k(this.$element,"disabled",this.options);this.readonly=k(this.$element,"readonly",this.options);this.inactive=this.disabled||this.readonly},getClearClass:function(){return this.clearButtonBaseClass+" "+(this.inactive?"":this.clearButtonActiveClass)},generateRating:function(){var a=this.renderClear(),b=this.renderCaption(),c=this.rtl?"rating-container-rtl":"rating-container",e=this.getStars(),c=this.glyphicon?c+(("\ue006"===this.symbol?" rating-gly-star":" rating-gly")+this.ratingClass):c+(d(this.ratingClass)?" rating-uni":" "+this.ratingClass);this.$rating.attr("class",c);this.$rating.attr("data-content",e);this.$stars.attr("data-content",e);c=this.rtl?"star-rating-rtl":"star-rating";this.$container.attr("class",c+" rating-"+this.size);this.$container.removeClass("rating-active rating-disabled");this.inactive?this.$container.addClass("rating-disabled"):this.$container.addClass("rating-active");d(this.$caption)&&(this.rtl?this.$container.prepend(b):this.$container.append(b));d(this.$clear)&&(this.rtl?this.$container.append(a):this.$container.prepend(a));d(this.containerClass)||g(this.$container,this.containerClass)},getStars:function(){var a=this.stars,b="",c;for(c=1;c<=a;c++)b+=this.symbol;return b},renderClear:function(){var a;if(!this.showClear)return"";a=this.getClearClass();return d(this.$clearElement)?'<div class="'+a+'" title="'+this.clearButtonTitle+'">'+this.clearButton+"</div>":(g(this.$clearElement,a),this.$clearElement.attr({title:this.clearButtonTitle}).html(this.clearButton),"")},renderCaption:function(){var a=this.$element.val();if(!this.showCaption)return"";a=this.fetchCaption(a);return d(this.$captionElement)?'<div class="caption">'+a+"</div>":(g(this.$captionElement,"caption"),this.$captionElement.html(a),"")},fetchCaption:function(a){a=parseFloat(a);var b,c;b=this.starCaptions;c=this.starCaptionClasses;c="function"===typeof c?c(a):c[a];b="function"===typeof b?b(a):b[a];b=d(b)?this.defaultCaption.replace(/\{rating\}/g,a):b;return'<span class="'+(d(c)?this.clearCaptionClass:c)+'">'+(a===this.clearValue?this.clearCaption:b)+"</span>"},getWidthFromValue:function(a){var b=this.min,c=this.max;return a<=b||b===c?0:a>=c?100:100*(a-b)/(c-b)},getValueFromPosition:function(a){var b;b=(b=(""+this.step).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/))?Math.max(0,(b[1]?b[1].length:0)-(b[2]?+b[2]:0)):0;var c=this.$rating.width();a=this.diff*a/(c*this.step);a=this.rtl?Math.floor(a):Math.ceil(a);a=parseFloat(this.min+a*this.step);b=parseFloat(a.toFixed(b));b=Math.max(Math.min(b,this.max),this.min);return this.rtl?this.max-b:b},toggleHover:function(a){var b;this.hoverChangeCaption&&(b=a.val<=this.clearValue?this.fetchCaption(this.clearValue):a.caption,this.$caption.html(b));this.hoverChangeStars&&(b=this.getWidthFromValue(this.clearValue),a=a.val<=this.clearValue?this.rtl?100-b+"%":b+"%":a.width,this.$stars.css("width",a))},calculate:function(a){var b=d(this.$element.val())?0:this.$element.val(),b=arguments.length?this.getValueFromPosition(a):b,c=this.fetchCaption(b),e=this.getWidthFromValue(b);this.rtl&&(e=100-e);return{caption:c,width:e+"%",val:b}},setStars:function(a){var b=arguments.length?this.calculate(a):this.calculate();this.$element.val(b.val);this.$stars.css("width",b.width);this.$caption.html(b.caption);this.cache=b},clear:function(){var a='<span class="'+this.clearCaptionClass+'">'+this.clearCaption+"</span>";this.$stars.removeClass("rated");this.inactive||this.$caption.html(a);this.$element.val(this.clearValue);this.setStars();this.$element.trigger("rating.clear")},reset:function(){this.$element.val(this.initialValue);this.setStars();this.$element.trigger("rating.reset")},update:function(a){arguments.length&&(this.$element.val(a),this.setStars())},refresh:function(a){arguments.length&&(this.$rating.off("rating"),void 0!==this.$clear&&this.$clear.off(),this.init(f.extend(this.options,a)),this.showClear?this.$clear.show():this.$clear.hide(),this.showCaption?this.$caption.show():this.$caption.hide(),this.$element.trigger("rating.refresh"))}};f.fn.rating=function(a){var b=Array.apply(null,arguments);b.shift();return this.each(function(){var c=f(this),e=c.data("rating"),d="object"===typeof a&&a;e||c.data("rating",e=new h(this,f.extend({},f.fn.rating.defaults,d,f(this).data())));"string"===typeof a&&e[a].apply(e,b)})};f.fn.rating.defaults={stars:5,glyphicon:!0,symbol:null,ratingClass:"",disabled:!1,readonly:!1,rtl:!1,size:"md",showClear:!0,showCaption:!0,defaultCaption:"{rating} Stars",starCaptions:{"0.5":"Half Star",1:"One Star","1.5":"One & Half Star",2:"Two Stars","2.5":"Two & Half Stars",3:"Three Stars","3.5":"Three & Half Stars",4:"Four Stars","4.5":"Four & Half Stars",5:"Five Stars"},starCaptionClasses:{"0.5":"label label-danger",1:"label label-danger","1.5":"label label-warning",2:"label label-warning","2.5":"label label-info",3:"label label-info","3.5":"label label-primary",4:"label label-primary","4.5":"label label-success",5:"label label-success"},clearButton:'<i class="glyphicon glyphicon-minus-sign"></i>',clearButtonTitle:"Clear",clearButtonBaseClass:"clear-rating",clearButtonActiveClass:"clear-rating-active",clearCaption:"Not Rated",clearCaptionClass:"label label-default",clearValue:null,captionElement:null,clearElement:null,containerClass:null,hoverEnabled:!0,hoverChangeCaption:!0,hoverChangeStars:!0,hoverOnClear:!0};f.fn.rating.Constructor=h;f("input.rating").addClass("rating-loading");f(document).ready(function(){var a=f("input.rating");0<Object.keys(a).length&&a.rating()})})(window.jQuery);