<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">{{projectName}}</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li class="active"><a href="/">Home</a></li>
                <li><a href="/about">About</a></li>
                <li><a href="/contact">Contact</a></li>
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</nav>

<div class="container">

    <div class="starter-template">
        <h1>Bootstrap starter template</h1>
        <p class="lead">Use this document as a way to quickly start any new project.<br> All you get is this text and a mostly barebones HTML document.</p>
    </div>


<div class="row-fluid">
    <div class="span12">
        <table class="table table-hover  table-bordered">
            <thead>
            <tr>
                <th>
                    编号
                </th>
                <th>
                    测试时间
                </th>
                <th>
                    详情
                </th>
                <th>
                    删除
                </th>
            </tr>
            </thead>
            <tbody id="table_list">
            {{#each users}}
                <tr>
                    <td>
                        {{_id}}
                    </td>
                    <td>
                        {{formatDate date}}
                    </td>
                    <td>
                        <a target="_blank" class="btn btn-primary" href="" type="button">查看</a>
                    </td>
                    <td>
                        <button class="btn btn-danger del" type="button" data-id="{{_id}}">删除</button>
                    </td>
                </tr>
            {{/each}}

            </tbody>
        </table>

        <script id="table_template" type="text/x-handlebars-template">

        </script>

        <script type="text/javascript">
            $(document).ready(function() {
                var table_template = Handlebars.compile($("#table_template").html());
                console.log("Here!");
                Handlebars.registerHelper("moment", function (date) {
                    //return moment(date).format("YYYY/MM/DD HH:mm:ss");
                    return Date(date).toString('yyyy-MM-dd');
                });
                console.log("Here!");
                $("#table_list").html(table_template({{!users}}));
            });

        </script>

    </div>
</div>


</div><!-- /.container -->


<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="/javascripts/jquery.min.js"></script>
<script src="/javascripts/bootstrap.min.js"></script>
<script src="/javascripts/handlebars-v4.0.4.js"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="/javascripts/ie10-viewport-bug-workaround.js"></script>
<script type="text/javascript">
    //这段代码不需要了。Exression helper在服务器处理了。
    $(document).ready(function() {
        Handlebars.registerHelper("formatDate", function (date) {
            //return moment(date).format("YYYY/MM/DD HH:mm:ss");
            return Date(date).toString('yyyy-MM-dd');
        });
    });
</script>